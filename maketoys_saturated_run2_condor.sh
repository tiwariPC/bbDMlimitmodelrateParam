year=run2
catg=C

datacard=datacards/datacard_bbDM${year}_${catg}/bbDM_datacard_${year}_THDMa_${catg}_allregion_2HDMa_Ma200_MChi1_MA600_tb35_st_0p7.txt

text2workspace.py $datacard --channel-masks
datacardws=`echo $datacard | sed  's|.txt|.root|g'`

echo $datacardws

combineTool.py -M GoodnessOfFit -d $datacardws --algo=saturated -n _result_bonly_CRonly --setParametersForFit mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 --setParametersForEval mask_d2016_cat_1b_sr=0,mask_d2017_cat_1b_sr=0,mask_d2018_cat_1b_sr=0,mask_d2016_cat_2b_sr=0,mask_d2017_cat_2b_sr=0,mask_d2018_cat_2b_sr=0 --freezeParameters r --setParameters r=0 --job-mode condor --task-name condor-saturated1 --sub-opts='+JobFlavour="testmatch"'

combineTool.py -M GoodnessOfFit -d $datacardws --algo=saturated -n _result_bonly_CRonly_toy --setParametersForFit mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 --setParametersForEval mask_d2016_cat_1b_sr=0,mask_d2017_cat_1b_sr=0,mask_d2018_cat_1b_sr=0,mask_d2016_cat_2b_sr=0,mask_d2017_cat_2b_sr=0,mask_d2018_cat_2b_sr=0 --freezeParameters r --setParameters r=0,mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 -t 200 --toysFrequentist -s -1 --job-mode condor --task-name condor-saturated2 --sub-opts='+JobFlavour="testmatch"'

combineTool.py -M GoodnessOfFit -d  $datacardws --algo=saturated -n _result_bonly_CRonly_toy --setParametersForFit mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 --setParametersForEval mask_d2016_cat_1b_sr=0,mask_d2017_cat_1b_sr=0,mask_d2018_cat_1b_sr=0,mask_d2016_cat_2b_sr=0,mask_d2017_cat_2b_sr=0,mask_d2018_cat_2b_sr=0 --freezeParameters r --setParameters r=0,mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 -t 200 --toysFrequentist -s -1 --job-mode condor --task-name condor-saturated3 --sub-opts='+JobFlavour="testmatch"'

combineTool.py -M GoodnessOfFit -d  $datacardws --algo=saturated -n _result_bonly_CRonly_toy --setParametersForFit mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 --setParametersForEval mask_d2016_cat_1b_sr=0,mask_d2017_cat_1b_sr=0,mask_d2018_cat_1b_sr=0,mask_d2016_cat_2b_sr=0,mask_d2017_cat_2b_sr=0,mask_d2018_cat_2b_sr=0 --freezeParameters r --setParameters r=0,mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 -t 200 --toysFrequentist -s -1 --job-mode condor --task-name condor-saturated4 --sub-opts='+JobFlavour="testmatch"'

combineTool.py -M GoodnessOfFit -d  $datacardws --algo=saturated -n _result_bonly_CRonly_toy --setParametersForFit mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 --setParametersForEval mask_d2016_cat_1b_sr=0,mask_d2017_cat_1b_sr=0,mask_d2018_cat_1b_sr=0,mask_d2016_cat_2b_sr=0,mask_d2017_cat_2b_sr=0,mask_d2018_cat_2b_sr=0 --freezeParameters r --setParameters r=0,mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 -t 200 --toysFrequentist -s -1 --job-mode condor --task-name condor-saturated5 --sub-opts='+JobFlavour="testmatch"'

combineTool.py -M GoodnessOfFit -d  $datacardws --algo=saturated -n _result_bonly_CRonly_toy --setParametersForFit mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 --setParametersForEval mask_d2016_cat_1b_sr=0,mask_d2017_cat_1b_sr=0,mask_d2018_cat_1b_sr=0,mask_d2016_cat_2b_sr=0,mask_d2017_cat_2b_sr=0,mask_d2018_cat_2b_sr=0 --freezeParameters r --setParameters r=0,mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 -t 200 --toysFrequentist -s -1 --job-mode condor --task-name condor-saturated6 --sub-opts='+JobFlavour="testmatch"'

combineTool.py -M GoodnessOfFit -d  $datacardws --algo=saturated -n _result_bonly_CRonly_toy --setParametersForFit mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 --setParametersForEval mask_d2016_cat_1b_sr=0,mask_d2017_cat_1b_sr=0,mask_d2018_cat_1b_sr=0,mask_d2016_cat_2b_sr=0,mask_d2017_cat_2b_sr=0,mask_d2018_cat_2b_sr=0 --freezeParameters r --setParameters r=0,mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 -t 200 --toysFrequentist -s -1 --job-mode condor --task-name condor-saturated7 --sub-opts='+JobFlavour="testmatch"'

combineTool.py -M GoodnessOfFit -d  $datacardws --algo=saturated -n _result_bonly_CRonly_toy --setParametersForFit mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 --setParametersForEval mask_d2016_cat_1b_sr=0,mask_d2017_cat_1b_sr=0,mask_d2018_cat_1b_sr=0,mask_d2016_cat_2b_sr=0,mask_d2017_cat_2b_sr=0,mask_d2018_cat_2b_sr=0 --freezeParameters r --setParameters r=0,mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 -t 200 --toysFrequentist -s -1 --job-mode condor --task-name condor-saturated8 --sub-opts='+JobFlavour="testmatch"'

combineTool.py -M GoodnessOfFit -d  $datacardws --algo=saturated -n _result_bonly_CRonly_toy --setParametersForFit mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 --setParametersForEval mask_d2016_cat_1b_sr=0,mask_d2017_cat_1b_sr=0,mask_d2018_cat_1b_sr=0,mask_d2016_cat_2b_sr=0,mask_d2017_cat_2b_sr=0,mask_d2018_cat_2b_sr=0 --freezeParameters r --setParameters r=0,mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 -t 200 --toysFrequentist -s -1 --job-mode condor --task-name condor-saturated9 --sub-opts='+JobFlavour="testmatch"'

combineTool.py -M GoodnessOfFit -d  $datacardws --algo=saturated -n _result_bonly_CRonly_toy --setParametersForFit mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 --setParametersForEval mask_d2016_cat_1b_sr=0,mask_d2017_cat_1b_sr=0,mask_d2018_cat_1b_sr=0,mask_d2016_cat_2b_sr=0,mask_d2017_cat_2b_sr=0,mask_d2018_cat_2b_sr=0 --freezeParameters r --setParameters r=0,mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 -t 200 --toysFrequentist -s -1 --job-mode condor --task-name condor-saturated10 --sub-opts='+JobFlavour="testmatch"'

combineTool.py -M GoodnessOfFit -d  $datacardws --algo=saturated -n _result_bonly_CRonly_toy --setParametersForFit mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 --setParametersForEval mask_d2016_cat_1b_sr=0,mask_d2017_cat_1b_sr=0,mask_d2018_cat_1b_sr=0,mask_d2016_cat_2b_sr=0,mask_d2017_cat_2b_sr=0,mask_d2018_cat_2b_sr=0 --freezeParameters r --setParameters r=0,mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 -t 200 --toysFrequentist -s -1 --job-mode condor --task-name condor-saturated11 --sub-opts='+JobFlavour="testmatch"'

combineTool.py -M GoodnessOfFit -d  $datacardws --algo=saturated -n _result_bonly_CRonly_toy --setParametersForFit mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 --setParametersForEval mask_d2016_cat_1b_sr=0,mask_d2017_cat_1b_sr=0,mask_d2018_cat_1b_sr=0,mask_d2016_cat_2b_sr=0,mask_d2017_cat_2b_sr=0,mask_d2018_cat_2b_sr=0 --freezeParameters r --setParameters r=0,mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 -t 200 --toysFrequentist -s -1 --job-mode condor --task-name condor-saturated12 --sub-opts='+JobFlavour="testmatch"'

combineTool.py -M GoodnessOfFit -d  $datacardws --algo=saturated -n _result_bonly_CRonly_toy --setParametersForFit mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 --setParametersForEval mask_d2016_cat_1b_sr=0,mask_d2017_cat_1b_sr=0,mask_d2018_cat_1b_sr=0,mask_d2016_cat_2b_sr=0,mask_d2017_cat_2b_sr=0,mask_d2018_cat_2b_sr=0 --freezeParameters r --setParameters r=0,mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 -t 200 --toysFrequentist -s -1 --job-mode condor --task-name condor-saturated13 --sub-opts='+JobFlavour="testmatch"'

combineTool.py -M GoodnessOfFit -d  $datacardws --algo=saturated -n _result_bonly_CRonly_toy --setParametersForFit mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 --setParametersForEval mask_d2016_cat_1b_sr=0,mask_d2017_cat_1b_sr=0,mask_d2018_cat_1b_sr=0,mask_d2016_cat_2b_sr=0,mask_d2017_cat_2b_sr=0,mask_d2018_cat_2b_sr=0 --freezeParameters r --setParameters r=0,mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 -t 200 --toysFrequentist -s -1 --job-mode condor --task-name condor-saturated14 --sub-opts='+JobFlavour="testmatch"'

combineTool.py -M GoodnessOfFit -d  $datacardws --algo=saturated -n _result_bonly_CRonly_toy --setParametersForFit mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 --setParametersForEval mask_d2016_cat_1b_sr=0,mask_d2017_cat_1b_sr=0,mask_d2018_cat_1b_sr=0,mask_d2016_cat_2b_sr=0,mask_d2017_cat_2b_sr=0,mask_d2018_cat_2b_sr=0 --freezeParameters r --setParameters r=0,mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 -t 200 --toysFrequentist -s -1 --job-mode condor --task-name condor-saturated15 --sub-opts='+JobFlavour="testmatch"'

combineTool.py -M GoodnessOfFit -d  $datacardws --algo=saturated -n _result_bonly_CRonly_toy --setParametersForFit mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 --setParametersForEval mask_d2016_cat_1b_sr=0,mask_d2017_cat_1b_sr=0,mask_d2018_cat_1b_sr=0,mask_d2016_cat_2b_sr=0,mask_d2017_cat_2b_sr=0,mask_d2018_cat_2b_sr=0 --freezeParameters r --setParameters r=0,mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 -t 200 --toysFrequentist -s -1 --job-mode condor --task-name condor-saturated16 --sub-opts='+JobFlavour="testmatch"'

combineTool.py -M GoodnessOfFit -d  $datacardws --algo=saturated -n _result_bonly_CRonly_toy --setParametersForFit mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 --setParametersForEval mask_d2016_cat_1b_sr=0,mask_d2017_cat_1b_sr=0,mask_d2018_cat_1b_sr=0,mask_d2016_cat_2b_sr=0,mask_d2017_cat_2b_sr=0,mask_d2018_cat_2b_sr=0 --freezeParameters r --setParameters r=0,mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 -t 200 --toysFrequentist -s -1 --job-mode condor --task-name condor-saturated17 --sub-opts='+JobFlavour="testmatch"'

combineTool.py -M GoodnessOfFit -d  $datacardws --algo=saturated -n _result_bonly_CRonly_toy --setParametersForFit mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 --setParametersForEval mask_d2016_cat_1b_sr=0,mask_d2017_cat_1b_sr=0,mask_d2018_cat_1b_sr=0,mask_d2016_cat_2b_sr=0,mask_d2017_cat_2b_sr=0,mask_d2018_cat_2b_sr=0 --freezeParameters r --setParameters r=0,mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 -t 200 --toysFrequentist -s -1 --job-mode condor --task-name condor-saturated18 --sub-opts='+JobFlavour="testmatch"'

combineTool.py -M GoodnessOfFit -d  $datacardws --algo=saturated -n _result_bonly_CRonly_toy --setParametersForFit mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 --setParametersForEval mask_d2016_cat_1b_sr=0,mask_d2017_cat_1b_sr=0,mask_d2018_cat_1b_sr=0,mask_d2016_cat_2b_sr=0,mask_d2017_cat_2b_sr=0,mask_d2018_cat_2b_sr=0 --freezeParameters r --setParameters r=0,mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 -t 200 --toysFrequentist -s -1 --job-mode condor --task-name condor-saturated19 --sub-opts='+JobFlavour="testmatch"'

combineTool.py -M GoodnessOfFit -d  $datacardws --algo=saturated -n _result_bonly_CRonly_toy --setParametersForFit mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 --setParametersForEval mask_d2016_cat_1b_sr=0,mask_d2017_cat_1b_sr=0,mask_d2018_cat_1b_sr=0,mask_d2016_cat_2b_sr=0,mask_d2017_cat_2b_sr=0,mask_d2018_cat_2b_sr=0 --freezeParameters r --setParameters r=0,mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 -t 200 --toysFrequentist -s -1 --job-mode condor --task-name condor-saturated20 --sub-opts='+JobFlavour="testmatch"'

combineTool.py -M GoodnessOfFit -d  $datacardws --algo=saturated -n _result_bonly_CRonly_toy --setParametersForFit mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 --setParametersForEval mask_d2016_cat_1b_sr=0,mask_d2017_cat_1b_sr=0,mask_d2018_cat_1b_sr=0,mask_d2016_cat_2b_sr=0,mask_d2017_cat_2b_sr=0,mask_d2018_cat_2b_sr=0 --freezeParameters r --setParameters r=0,mask_d2016_cat_1b_sr=1,mask_d2017_cat_1b_sr=1,mask_d2018_cat_1b_sr=1,mask_d2016_cat_2b_sr=1,mask_d2017_cat_2b_sr=1,mask_d2018_cat_2b_sr=1 -t 200 --toysFrequentist -s -1 --job-mode condor --task-name condor-saturated21 --sub-opts='+JobFlavour="testmatch"'

#hadd higgscombineTool.py_result_bonly_CRonly_toy.GoodnessOfFit.mH120.Merged.root higgscombineTool.py_result_bonly_CRonly_toy.GoodnessOfFit.mH120.1243*.root
